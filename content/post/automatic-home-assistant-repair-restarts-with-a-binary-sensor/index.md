---
title: "Automatic Home Assistant Repair Restarts with a Binary Sensor"
date: 2023-10-10T19:00:00Z
draft: trufalsee
categories: ["Home Assistant", "Template","HACS"]
---

## Introduction

{{< srcset src="restart-required.jpg" title="BirdPi Image">}}

Home Assistant is a powerful home automation platform that allows you to control and monitor various smart devices in your home. It's essential to ensure that Home Assistant runs smoothly, and sometimes, it may require a restart to apply HACS updates, through the repair system. Automating the process of restarting Home Assistant can be a convenient way to ensure its uninterrupted functionality at a quiet time that suits you. In this blog post, we'll explore a use case where we'll create a binary sensor template to detect when a Home Assistant restart is required and set up an automation to trigger the restart automatically.

## Use Case: Detecting Home Assistant Restart Requirement

Imagine a scenario where you want to automate the process of restarting Home Assistant when a restart is required. Home Assistant generates alerts when critical updates or changes are pending, and one of these alerts indicates a "Restart of Home Assistant required." We can create a binary sensor template to detect this specific alert and trigger an automation for a scheduled restart.

## Setting up the Binary Sensor Template and Automation

To achieve this, we'll need to create a binary sensor template that checks for the presence of the "Restart of Home Assistant required" alert. Here's how you can set up the binary sensor template and the automation:

### Step 1: Create the Binary Sensor Template

You can either create this in YAML, or through the new template setup in the UI, or through YAML.
If you prefer YAML navigate to the `configuration.yaml` file or your preferred configuration file for binary sensors. Add the following code to create the binary sensor template:

{{< gist phillprice 594106253864a8ae0a6c1c0d185e1e75 "binary-sensor.yaml" >}}

If you prefer the UI setup then navigate to Settings > Devices and Services and go the the Helpers Tab

Scroll a long way down until you get to template
{{< srcset src="template.jpg" title="BirdPi Image">}}

Choose the binary sensor
{{< srcset src="binary.jpg" title="BirdPi Image">}}

Fill in the name, the template (see `value_template` above and choose the type as problem.)
{{< srcset src="detail.jpg" title="BirdPi Image">}}

This code defines a binary sensor named `restart_required` that checks the alerts generated by Home Assistant. It will be in an "on" state when the specific alert is found and "off" otherwise.

### Step 2: Create the Automation

Next, we'll create an automation that triggers a Home Assistant restart when the `restart_required` binary sensor is in the "on" state. Add the following automation code to your configuration file:

{{< gist phillprice 594106253864a8ae0a6c1c0d185e1e75 "restart-automation.yaml" >}}

This automation is named "Restart Home Assistant" and is scheduled to trigger at 00:15:00 (15 minutes past midnight). It includes a condition that checks if the `restart_required` binary sensor is in the "on" state. If the condition is met, it will execute the action to restart Home Assistant.

## Conclusion

By setting up a binary sensor template and automation as described in this blog post, you can automate the process of restarting Home Assistant when it's required. This ensures that your Home Assistant instance stays up-to-date and continues to function smoothly without manual intervention. Home automation is all about convenience, and automating essential maintenance tasks like restarts can save you time and effort in managing your smart home.